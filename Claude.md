# 命令書

あなたは、Pythonを用いたWebアプリケーション開発に精通した、優秀なフルスタックエンジニア兼プロジェクトマネージャーです。
以下のプロジェクト概要と要件定義に基づき、Webアプリケーションを開発するための詳細な計画と、主要機能のサンプルコードを生成してください。

思考プロセスをステップ・バイ・ステップで進め、網羅的で論理的な成果物を作成してください。

---

## 1. プロジェクト概要

- **プロジェクト名**: Web版 動画10分分割ツール
- **目的**: ユーザーがブラウザ経由で長尺の動画ファイルをアップロードし、それを10分単位のセグメントに自動で分割できるWebアプリケーションを開発する。動画共有サイトへの投稿作業などを効率化したい。
- **対象ユーザー**:
  - 動画コンテンツ制作者（YouTuberなど）
  - セミナー等の記録映像を共有したい法人・個人
  - 専門知識なしに簡単な動画分割を行いたい一般ユーザー

---

## 2. 要件定義

### 2.1. 機能要件
- **動画アップロード**:
  - ユーザーはローカルの動画ファイル（MP4, MOV, AVI形式）をアップロードできる。
  - ファイルサイズの上限は10GBとする。
- **動画分割処理**:
  - アップロードされた動画を、先頭から10分（600秒）ごとに自動で分割する。
  - 最後のセグメントは10分未満でも可とする。
  - サーバー側での処理中は、フロントエンドで進捗がわかるようにプログレスバーを表示する。
- **ファイルダウンロード**:
  - 分割完了後、生成された動画ファイルの一覧を表示する。
  - 各ファイルを個別にダウンロードできる。
  - 全ての分割済みファイルをZIP形式で一括ダウンロードできる。
- **自動ファイル削除**:
  - サーバーのストレージを圧迫しないよう、アップロードされた元動画および分割後の動画ファイルは、処理完了から24時間後に自動でサーバーから削除する。

### 2.2. 非機能要件
- **パフォーマンス**:
  - 動画の分割処理は、元動画の再生時間の1.5倍以内で完了することを目指す。
  - 最大3時間（180分）の動画ファイルに対応する。
  - 3ユーザー程度の同時アクセスに安定して対応できること。
- **ユーザビリティ**:
  - 専門知識がなくても直感的に操作できる、シンプルでわかりやすいUIを設計する。
- **セキュリティ**:
  - アップロードされた動画ファイルは、アップロードした本人以外はアクセスできないように制御する。
- **対応環境**:
  - PCの主要Webブラウザ（Chrome, Firefox, Safari, Edge）の最新版で正常に動作する。

---

## 3. 技術仕様

- **バックエンド**: Python, Flaskフレームワーク
- **動画処理**: MoviePyライブラリ (FFmpegを内部で使用)
- **フロントエンド**: HTML, CSS, JavaScript (特別なフレームワークは不要)

---

## 4. 生成してほしい成果物

上記の要件と仕様に基づき、以下の成果物を生成してください。
各項目は見出しを付けて、マークダウン形式で分かりやすく整理してください。

1.  **WBS (Work Breakdown Structure)**
    - プロジェクトを「計画・設計」「開発・実装」「テスト」「リリース・運用」のフェーズに分け、各フェーズで必要なタスクを詳細に洗い出したリストを作成してください[9][16][25]。

2.  **システム構成図**
    - ユーザー、フロントエンド、バックエンド(Flask)、動画処理(MoviePy)、ファイルストレージの関係性を表現した簡単な構成図を、Mermaid記法の`graph TD`で記述してください。

3.  **バックエンドのPythonコード (Flask)**
    - 以下の機能を持つ、主要なFlaskアプリケーションのサンプルコードを生成してください。
      - ファイルアップロードを受け付けるエンドポイント (`/upload`)
      - アップロードされた動画をMoviePyを使って10分ごとに分割し、一時フォルダに保存する処理ロジック
      - 分割後のファイルリストをJSONで返すエンドポイント (`/files`)
      - 個別ファイルをダウンロードさせるエンドポイント (`/download/<filename>`)

4.  **フロントエンドのコード (HTML/JavaScript)**
    - 以下の機能を持つ、単一のHTMLファイルのサンプルコードを生成してください。
      - 動画ファイル選択フォーム
      - アップロードボタン
      - アップロードとサーバーでの処理中に表示するプログレスバー
      - 処理完了後、サーバーから取得したファイルリストを表示し、ダウンロードリンクを生成する機能

